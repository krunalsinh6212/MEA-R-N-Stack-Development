{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/product.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction ProductDetailsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h4\");\n    i0.ɵɵtext(2, \"Product\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\")(4, \"label\")(5, \"strong\");\n    i0.ɵɵtext(6, \"Title:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\")(9, \"label\")(10, \"strong\");\n    i0.ɵɵtext(11, \"Description:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\")(14, \"label\")(15, \"strong\");\n    i0.ɵɵtext(16, \"Status:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"a\", 2);\n    i0.ɵɵtext(19, \" Edit \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.currentProduct.title, \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.currentProduct.description, \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.currentProduct.published ? \"Published\" : \"Pending\", \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/products/\", ctx_r0.currentProduct.id, \"\");\n  }\n}\nfunction ProductDetailsComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"br\");\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"Please click on a Product...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProductDetailsComponent_div_2_button_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function ProductDetailsComponent_div_2_button_17_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.updatePublished(false));\n    });\n    i0.ɵɵtext(1, \" UnPublish \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductDetailsComponent_div_2_button_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function ProductDetailsComponent_div_2_button_18_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.updatePublished(true));\n    });\n    i0.ɵɵtext(1, \" Publish \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductDetailsComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"h4\");\n    i0.ɵɵtext(2, \"Product\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"form\")(4, \"div\", 4)(5, \"label\", 5);\n    i0.ɵɵtext(6, \"Title\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"input\", 6);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductDetailsComponent_div_2_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.currentProduct.title = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 4)(9, \"label\", 7);\n    i0.ɵɵtext(10, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"input\", 8);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductDetailsComponent_div_2_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.currentProduct.description = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\", 4)(13, \"label\")(14, \"strong\");\n    i0.ɵɵtext(15, \"Status:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(17, ProductDetailsComponent_div_2_button_17_Template, 2, 0, \"button\", 9);\n    i0.ɵɵtemplate(18, ProductDetailsComponent_div_2_button_18_Template, 2, 0, \"button\", 9);\n    i0.ɵɵelementStart(19, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function ProductDetailsComponent_div_2_Template_button_click_19_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.deleteProduct());\n    });\n    i0.ɵɵtext(20, \" Delete \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function ProductDetailsComponent_div_2_Template_button_click_21_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.updateProduct());\n    });\n    i0.ɵɵtext(22, \" Update \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"p\");\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.currentProduct.title);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.currentProduct.description);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.currentProduct.published ? \"Published\" : \"Pending\", \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.currentProduct.published);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.currentProduct.published);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r2.message);\n  }\n}\nfunction ProductDetailsComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"br\");\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"Cannot access this Product...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class ProductDetailsComponent {\n  constructor(productService, route, router) {\n    this.productService = productService;\n    this.route = route;\n    this.router = router;\n    this.viewMode = false;\n    this.currentProduct = {\n      title: '',\n      description: '',\n      published: false\n    };\n    this.message = '';\n    this.error = '';\n  }\n  ngOnInit() {\n    if (!this.viewMode) {\n      this.message = '';\n      this.error = '';\n      this.getProduct(this.route.snapshot.params[\"id\"]);\n    }\n  }\n  getProduct(id) {\n    this.productService.get(id).subscribe({\n      next: data => {\n        this.currentProduct = data;\n        console.log(data);\n      },\n      error: e => {\n        console.error(e);\n        this.error = e.error.message || 'Error retrieving product';\n        if (e.status === 404) {\n          this.router.navigate(['/products']);\n        }\n      }\n    });\n  }\n  updatePublished(status) {\n    const data = {\n      title: this.currentProduct.title,\n      description: this.currentProduct.description,\n      published: status\n    };\n    this.productService.update(this.currentProduct.id, data).subscribe({\n      next: res => {\n        console.log(res);\n        this.currentProduct.published = status;\n        this.message = 'The product was updated successfully!';\n      },\n      error: e => {\n        console.error(e);\n        this.error = e.error.message || 'Error updating product status';\n      }\n    });\n  }\n  updateProduct() {\n    this.message = '';\n    this.error = '';\n    this.productService.update(this.currentProduct.id, this.currentProduct).subscribe({\n      next: res => {\n        console.log(res);\n        this.message = 'The product was updated successfully!';\n      },\n      error: e => {\n        console.error(e);\n        this.error = e.error.message || 'Error updating product';\n      }\n    });\n  }\n  deleteProduct() {\n    this.productService.delete(this.currentProduct.id).subscribe({\n      next: res => {\n        console.log(res);\n        this.router.navigate(['/products']);\n      },\n      error: e => {\n        console.error(e);\n        this.error = e.error.message || 'Error deleting product';\n      }\n    });\n  }\n}\nProductDetailsComponent.ɵfac = function ProductDetailsComponent_Factory(t) {\n  return new (t || ProductDetailsComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router));\n};\nProductDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductDetailsComponent,\n  selectors: [[\"app-product-details\"]],\n  inputs: {\n    viewMode: \"viewMode\",\n    currentProduct: \"currentProduct\"\n  },\n  decls: 4,\n  vars: 4,\n  consts: [[4, \"ngIf\"], [\"class\", \"edit-form\", 4, \"ngIf\"], [1, \"badge\", \"badge-warning\", 3, \"routerLink\"], [1, \"edit-form\"], [1, \"form-group\"], [\"for\", \"title\"], [\"type\", \"text\", \"id\", \"title\", \"name\", \"title\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"description\"], [\"type\", \"text\", \"id\", \"description\", \"name\", \"description\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"badge badge-primary mr-2\", 3, \"click\", 4, \"ngIf\"], [1, \"badge\", \"badge-danger\", \"mr-2\", 3, \"click\"], [\"type\", \"submit\", 1, \"badge\", \"badge-success\", \"mb-2\", 3, \"click\"], [1, \"badge\", \"badge-primary\", \"mr-2\", 3, \"click\"]],\n  template: function ProductDetailsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ProductDetailsComponent_div_0_Template, 20, 4, \"div\", 0);\n      i0.ɵɵtemplate(1, ProductDetailsComponent_div_1_Template, 4, 0, \"div\", 0);\n      i0.ɵɵtemplate(2, ProductDetailsComponent_div_2_Template, 25, 6, \"div\", 1);\n      i0.ɵɵtemplate(3, ProductDetailsComponent_div_3_Template, 4, 0, \"div\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.currentProduct.id);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.currentProduct);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.currentProduct.id);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.currentProduct.id);\n    }\n  },\n  dependencies: [i3.NgIf, i2.RouterLink, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.NgModel, i4.NgForm],\n  styles: [\".edit-form[_ngcontent-%COMP%] {\\r\\n  max-width: 300px;\\r\\n  margin: auto;\\r\\n}\\r\\n\\r\\n.submit-form[_ngcontent-%COMP%] {\\r\\n  max-width: 300px;\\r\\n  margin: auto;\\r\\n}\\n/*# sourceURL=webpack://./src/app/components/product-details/product-details.component.css */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9wcm9kdWN0LWRldGFpbHMvcHJvZHVjdC1kZXRhaWxzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxnQkFBZ0I7RUFDaEIsWUFBWTtBQUNkOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLFlBQVk7QUFDZCIsInNvdXJjZXNDb250ZW50IjpbIi5lZGl0LWZvcm0ge1xyXG4gIG1heC13aWR0aDogMzAwcHg7XHJcbiAgbWFyZ2luOiBhdXRvO1xyXG59XHJcblxyXG4uc3VibWl0LWZvcm0ge1xyXG4gIG1heC13aWR0aDogMzAwcHg7XHJcbiAgbWFyZ2luOiBhdXRvO1xyXG59ICJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ProductDetailsComponent","constructor","productService","route","router","title","description","published","ngOnInit","viewMode","message","error","getProduct","snapshot","params","id","get","subscribe","next","data","currentProduct","console","log","e","status","navigate","updatePublished","update","res","updateProduct","deleteProduct","delete","selectors","inputs","decls","vars","consts","template"],"sourceRoot":"","sources":["D:\\MEAN-stack\\Angular_crud\\frontend\\src\\app\\components\\product-details\\product-details.component.html","D:\\MEAN-stack\\Angular_crud\\frontend\\src\\app\\components\\product-details\\product-details.component.ts"],"sourcesContent":["<div *ngIf=\"currentProduct.id\">\r\n  <h4>Product</h4>\r\n  <div>\r\n    <label><strong>Title:</strong></label> {{ currentProduct.title }}\r\n  </div>\r\n  <div>\r\n    <label><strong>Description:</strong></label>\r\n    {{ currentProduct.description }}\r\n  </div>\r\n  <div>\r\n    <label><strong>Status:</strong></label>\r\n    {{ currentProduct.published ? \"Published\" : \"Pending\" }}\r\n  </div>\r\n\r\n  <a\r\n    class=\"badge badge-warning\"\r\n    routerLink=\"/products/{{ currentProduct.id }}\"\r\n  >\r\n    Edit\r\n  </a>\r\n</div>\r\n\r\n<div *ngIf=\"!currentProduct\">\r\n  <br />\r\n  <p>Please click on a Product...</p>\r\n</div>\r\n\r\n<div *ngIf=\"currentProduct.id\" class=\"edit-form\">\r\n  <h4>Product</h4>\r\n  <form>\r\n    <div class=\"form-group\">\r\n      <label for=\"title\">Title</label>\r\n      <input\r\n        type=\"text\"\r\n        class=\"form-control\"\r\n        id=\"title\"\r\n        [(ngModel)]=\"currentProduct.title\"\r\n        name=\"title\"\r\n      />\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"description\">Description</label>\r\n      <input\r\n        type=\"text\"\r\n        class=\"form-control\"\r\n        id=\"description\"\r\n        [(ngModel)]=\"currentProduct.description\"\r\n        name=\"description\"\r\n      />\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label><strong>Status:</strong></label>\r\n      {{ currentProduct.published ? \"Published\" : \"Pending\" }}\r\n    </div>\r\n  </form>\r\n\r\n  <button\r\n    class=\"badge badge-primary mr-2\"\r\n    *ngIf=\"currentProduct.published\"\r\n    (click)=\"updatePublished(false)\"\r\n  >\r\n    UnPublish\r\n  </button>\r\n  <button\r\n    class=\"badge badge-primary mr-2\"\r\n    *ngIf=\"!currentProduct.published\"\r\n    (click)=\"updatePublished(true)\"\r\n  >\r\n    Publish\r\n  </button>\r\n\r\n  <button class=\"badge badge-danger mr-2\" (click)=\"deleteProduct()\">\r\n    Delete\r\n  </button>\r\n\r\n  <button\r\n    type=\"submit\"\r\n    class=\"badge badge-success mb-2\"\r\n    (click)=\"updateProduct()\"\r\n  >\r\n    Update\r\n  </button>\r\n  <p>{{ message }}</p>\r\n</div>\r\n\r\n<div *ngIf=\"!currentProduct.id\">\r\n  <br />\r\n  <p>Cannot access this Product...</p>\r\n</div> ","import { Component, Input, OnInit } from '@angular/core';\r\nimport { ProductService } from 'src/app/services/product.service';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Product } from 'src/app/models/product.model';\r\n\r\n@Component({\r\n  selector: 'app-product-details',\r\n  templateUrl: './product-details.component.html',\r\n  styleUrls: ['./product-details.component.css']\r\n})\r\nexport class ProductDetailsComponent implements OnInit {\r\n  @Input() viewMode = false;\r\n  @Input() currentProduct: Product = {\r\n    title: '',\r\n    description: '',\r\n    published: false\r\n  };\r\n  \r\n  message = '';\r\n  error = '';\r\n\r\n  constructor(\r\n    private productService: ProductService,\r\n    private route: ActivatedRoute,\r\n    private router: Router) { }\r\n\r\n  ngOnInit(): void {\r\n    if (!this.viewMode) {\r\n      this.message = '';\r\n      this.error = '';\r\n      this.getProduct(this.route.snapshot.params[\"id\"]);\r\n    }\r\n  }\r\n\r\n  getProduct(id: string): void {\r\n    this.productService.get(id)\r\n      .subscribe({\r\n        next: (data) => {\r\n          this.currentProduct = data;\r\n          console.log(data);\r\n        },\r\n        error: (e) => {\r\n          console.error(e);\r\n          this.error = e.error.message || 'Error retrieving product';\r\n          if (e.status === 404) {\r\n            this.router.navigate(['/products']);\r\n          }\r\n        }\r\n      });\r\n  }\r\n\r\n  updatePublished(status: boolean): void {\r\n    const data = {\r\n      title: this.currentProduct.title,\r\n      description: this.currentProduct.description,\r\n      published: status\r\n    };\r\n\r\n    this.productService.update(this.currentProduct.id, data)\r\n      .subscribe({\r\n        next: (res) => {\r\n          console.log(res);\r\n          this.currentProduct.published = status;\r\n          this.message = 'The product was updated successfully!';\r\n        },\r\n        error: (e) => {\r\n          console.error(e);\r\n          this.error = e.error.message || 'Error updating product status';\r\n        }\r\n      });\r\n  }\r\n\r\n  updateProduct(): void {\r\n    this.message = '';\r\n    this.error = '';\r\n\r\n    this.productService.update(this.currentProduct.id, this.currentProduct)\r\n      .subscribe({\r\n        next: (res) => {\r\n          console.log(res);\r\n          this.message = 'The product was updated successfully!';\r\n        },\r\n        error: (e) => {\r\n          console.error(e);\r\n          this.error = e.error.message || 'Error updating product';\r\n        }\r\n      });\r\n  }\r\n\r\n  deleteProduct(): void {\r\n    this.productService.delete(this.currentProduct.id)\r\n      .subscribe({\r\n        next: (res) => {\r\n          console.log(res);\r\n          this.router.navigate(['/products']);\r\n        },\r\n        error: (e) => {\r\n          console.error(e);\r\n          this.error = e.error.message || 'Error deleting product';\r\n        }\r\n      });\r\n  }\r\n} "]},"metadata":{},"sourceType":"module","externalDependencies":[]}