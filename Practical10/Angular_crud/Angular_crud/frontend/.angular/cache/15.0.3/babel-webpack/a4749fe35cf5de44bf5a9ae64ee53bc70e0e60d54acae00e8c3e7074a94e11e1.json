{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/product.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction ProductDetailsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.error, \"\\n\");\n  }\n}\nfunction ProductDetailsComponent_div_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h4\");\n    i0.ɵɵtext(2, \"Product\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\")(4, \"label\")(5, \"strong\");\n    i0.ɵɵtext(6, \"Title:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\")(9, \"label\")(10, \"strong\");\n    i0.ɵɵtext(11, \"Price:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\")(14, \"label\")(15, \"strong\");\n    i0.ɵɵtext(16, \"Status:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"a\", 4);\n    i0.ɵɵtext(19, \" Edit \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.currentProduct.title, \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" $\", ctx_r3.currentProduct.price, \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.currentProduct.published ? \"Published\" : \"Pending\", \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/products/\", ctx_r3.currentProduct.id, \"\");\n  }\n}\nfunction ProductDetailsComponent_div_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"br\");\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"Please click on a Product...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProductDetailsComponent_div_1_div_3_button_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function ProductDetailsComponent_div_1_div_3_button_17_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r9.updatePublished(false));\n    });\n    i0.ɵɵtext(1, \" UnPublish \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductDetailsComponent_div_1_div_3_button_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function ProductDetailsComponent_div_1_div_3_button_18_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r11.updatePublished(true));\n    });\n    i0.ɵɵtext(1, \" Publish \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductDetailsComponent_div_1_div_3_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r8.message, \" \");\n  }\n}\nfunction ProductDetailsComponent_div_1_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"h4\");\n    i0.ɵɵtext(2, \"Product\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"form\")(4, \"div\", 6)(5, \"label\", 7);\n    i0.ɵɵtext(6, \"Title\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"input\", 8);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductDetailsComponent_div_1_div_3_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.currentProduct.title = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 6)(9, \"label\", 9);\n    i0.ɵɵtext(10, \"Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"input\", 10);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductDetailsComponent_div_1_div_3_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r15.currentProduct.price = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\", 6)(13, \"label\")(14, \"strong\");\n    i0.ɵɵtext(15, \"Status:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(17, ProductDetailsComponent_div_1_div_3_button_17_Template, 2, 0, \"button\", 11);\n    i0.ɵɵtemplate(18, ProductDetailsComponent_div_1_div_3_button_18_Template, 2, 0, \"button\", 11);\n    i0.ɵɵelementStart(19, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function ProductDetailsComponent_div_1_div_3_Template_button_click_19_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r16.deleteProduct());\n    });\n    i0.ɵɵtext(20, \" Delete \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function ProductDetailsComponent_div_1_div_3_Template_button_click_21_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r17 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r17.updateProduct());\n    });\n    i0.ɵɵtext(22, \" Update \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(23, ProductDetailsComponent_div_1_div_3_div_23_Template, 2, 1, \"div\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngModel\", ctx_r5.currentProduct.title);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r5.currentProduct.price);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r5.currentProduct.published ? \"Published\" : \"Pending\", \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.currentProduct.published);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r5.currentProduct.published);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.message);\n  }\n}\nfunction ProductDetailsComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, ProductDetailsComponent_div_1_div_1_Template, 20, 4, \"div\", 1);\n    i0.ɵɵtemplate(2, ProductDetailsComponent_div_1_div_2_Template, 4, 0, \"div\", 1);\n    i0.ɵɵtemplate(3, ProductDetailsComponent_div_1_div_3_Template, 24, 6, \"div\", 3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.currentProduct.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.currentProduct.id && !ctx_r1.error);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.currentProduct.id);\n  }\n}\nfunction ProductDetailsComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"br\");\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"Select a product to view details...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class ProductDetailsComponent {\n  constructor(productService, route, router) {\n    this.productService = productService;\n    this.route = route;\n    this.router = router;\n    this.viewMode = false;\n    this.currentProduct = {\n      title: '',\n      price: 0,\n      published: false\n    };\n    this.message = '';\n    this.error = '';\n  }\n  ngOnInit() {\n    if (!this.viewMode) {\n      this.message = '';\n      this.error = '';\n      this.getProduct(this.route.snapshot.params[\"id\"]);\n    }\n  }\n  getProduct(id) {\n    this.productService.get(id).subscribe({\n      next: data => {\n        this.currentProduct = data;\n        console.log(data);\n      },\n      error: e => {\n        console.error(e);\n        this.error = e.error?.message || 'Error accessing the product';\n        this.currentProduct = null;\n      }\n    });\n  }\n  updatePublished(status) {\n    if (!this.currentProduct) return;\n    const data = {\n      title: this.currentProduct.title,\n      price: this.currentProduct.price,\n      published: status\n    };\n    this.productService.update(this.currentProduct.id, data).subscribe({\n      next: res => {\n        console.log(res);\n        if (this.currentProduct) {\n          this.currentProduct.published = status;\n        }\n        this.message = res.message || 'The status was updated successfully!';\n      },\n      error: e => {\n        console.error(e);\n        this.error = e.error?.message || 'Error updating the product status';\n      }\n    });\n  }\n  updateProduct() {\n    if (!this.currentProduct) return;\n    this.message = '';\n    this.error = '';\n    this.productService.update(this.currentProduct.id, this.currentProduct).subscribe({\n      next: res => {\n        console.log(res);\n        this.message = res.message || 'This product was updated successfully!';\n      },\n      error: e => {\n        console.error(e);\n        this.error = e.error?.message || 'Error updating the product';\n      }\n    });\n  }\n  deleteProduct() {\n    if (!this.currentProduct) return;\n    this.productService.delete(this.currentProduct.id).subscribe({\n      next: res => {\n        console.log(res);\n        this.router.navigate(['/products']);\n      },\n      error: e => {\n        console.error(e);\n        this.error = e.error?.message || 'Error deleting the product';\n      }\n    });\n  }\n}\nProductDetailsComponent.ɵfac = function ProductDetailsComponent_Factory(t) {\n  return new (t || ProductDetailsComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router));\n};\nProductDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductDetailsComponent,\n  selectors: [[\"app-product-details\"]],\n  inputs: {\n    viewMode: \"viewMode\",\n    currentProduct: \"currentProduct\"\n  },\n  decls: 3,\n  vars: 3,\n  consts: [[\"class\", \"alert alert-danger\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"alert\", \"alert-danger\"], [\"class\", \"edit-form\", 4, \"ngIf\"], [1, \"badge\", \"badge-warning\", 3, \"routerLink\"], [1, \"edit-form\"], [1, \"form-group\"], [\"for\", \"title\"], [\"type\", \"text\", \"id\", \"title\", \"required\", \"\", \"name\", \"title\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"price\"], [\"type\", \"number\", \"id\", \"price\", \"required\", \"\", \"name\", \"price\", \"min\", \"0\", \"step\", \"0.01\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"badge badge-primary mr-2\", 3, \"click\", 4, \"ngIf\"], [1, \"badge\", \"badge-danger\", \"mr-2\", 3, \"click\"], [\"type\", \"submit\", 1, \"badge\", \"badge-success\", \"mb-2\", 3, \"click\"], [\"class\", \"alert alert-success\", 4, \"ngIf\"], [1, \"badge\", \"badge-primary\", \"mr-2\", 3, \"click\"], [1, \"alert\", \"alert-success\"]],\n  template: function ProductDetailsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ProductDetailsComponent_div_0_Template, 2, 1, \"div\", 0);\n      i0.ɵɵtemplate(1, ProductDetailsComponent_div_1_Template, 4, 3, \"div\", 1);\n      i0.ɵɵtemplate(2, ProductDetailsComponent_div_2_Template, 4, 0, \"div\", 1);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.error);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.currentProduct);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.currentProduct && !ctx.error);\n    }\n  },\n  dependencies: [i3.NgIf, i2.RouterLink, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.MinValidator, i4.NgModel, i4.NgForm],\n  styles: [\".edit-form[_ngcontent-%COMP%] {\\r\\n  max-width: 300px;\\r\\n  margin: auto;\\r\\n}\\r\\n\\r\\n.submit-form[_ngcontent-%COMP%] {\\r\\n  max-width: 300px;\\r\\n  margin: auto;\\r\\n}\\n/*# sourceURL=webpack://./src/app/components/product-details/product-details.component.css */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9wcm9kdWN0LWRldGFpbHMvcHJvZHVjdC1kZXRhaWxzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxnQkFBZ0I7RUFDaEIsWUFBWTtBQUNkOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLFlBQVk7QUFDZCIsInNvdXJjZXNDb250ZW50IjpbIi5lZGl0LWZvcm0ge1xyXG4gIG1heC13aWR0aDogMzAwcHg7XHJcbiAgbWFyZ2luOiBhdXRvO1xyXG59XHJcblxyXG4uc3VibWl0LWZvcm0ge1xyXG4gIG1heC13aWR0aDogMzAwcHg7XHJcbiAgbWFyZ2luOiBhdXRvO1xyXG59ICJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ProductDetailsComponent","constructor","productService","route","router","title","price","published","ngOnInit","viewMode","message","error","getProduct","snapshot","params","id","get","subscribe","next","data","currentProduct","console","log","e","updatePublished","status","update","res","updateProduct","deleteProduct","delete","navigate","selectors","inputs","decls","vars","consts","template"],"sourceRoot":"","sources":["D:\\MEAN-stack\\Angular_crud\\frontend\\src\\app\\components\\product-details\\product-details.component.html","D:\\MEAN-stack\\Angular_crud\\frontend\\src\\app\\components\\product-details\\product-details.component.ts"],"sourcesContent":["<div *ngIf=\"error\" class=\"alert alert-danger\">\r\n  {{ error }}\r\n</div>\r\n\r\n<div *ngIf=\"currentProduct\">\r\n  <div *ngIf=\"currentProduct.id\">\r\n    <h4>Product</h4>\r\n    <div>\r\n      <label><strong>Title:</strong></label> {{ currentProduct.title }}\r\n    </div>\r\n    <div>\r\n      <label><strong>Price:</strong></label>\r\n      ${{ currentProduct.price }}\r\n    </div>\r\n    <div>\r\n      <label><strong>Status:</strong></label>\r\n      {{ currentProduct.published ? \"Published\" : \"Pending\" }}\r\n    </div>\r\n\r\n    <a\r\n      class=\"badge badge-warning\"\r\n      routerLink=\"/products/{{ currentProduct.id }}\"\r\n    >\r\n      Edit\r\n    </a>\r\n  </div>\r\n\r\n  <div *ngIf=\"!currentProduct.id && !error\">\r\n    <br />\r\n    <p>Please click on a Product...</p>\r\n  </div>\r\n\r\n  <div *ngIf=\"currentProduct.id\" class=\"edit-form\">\r\n    <h4>Product</h4>\r\n    <form>\r\n      <div class=\"form-group\">\r\n        <label for=\"title\">Title</label>\r\n        <input\r\n          type=\"text\"\r\n          class=\"form-control\"\r\n          id=\"title\"\r\n          required\r\n          [(ngModel)]=\"currentProduct.title\"\r\n          name=\"title\"\r\n        />\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"price\">Price</label>\r\n        <input\r\n          type=\"number\"\r\n          class=\"form-control\"\r\n          id=\"price\"\r\n          required\r\n          [(ngModel)]=\"currentProduct.price\"\r\n          name=\"price\"\r\n          min=\"0\"\r\n          step=\"0.01\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label><strong>Status:</strong></label>\r\n        {{ currentProduct.published ? \"Published\" : \"Pending\" }}\r\n      </div>\r\n    </form>\r\n\r\n    <button\r\n      class=\"badge badge-primary mr-2\"\r\n      *ngIf=\"currentProduct.published\"\r\n      (click)=\"updatePublished(false)\"\r\n    >\r\n      UnPublish\r\n    </button>\r\n    <button\r\n      class=\"badge badge-primary mr-2\"\r\n      *ngIf=\"!currentProduct.published\"\r\n      (click)=\"updatePublished(true)\"\r\n    >\r\n      Publish\r\n    </button>\r\n\r\n    <button class=\"badge badge-danger mr-2\" (click)=\"deleteProduct()\">\r\n      Delete\r\n    </button>\r\n\r\n    <button\r\n      type=\"submit\"\r\n      class=\"badge badge-success mb-2\"\r\n      (click)=\"updateProduct()\"\r\n    >\r\n      Update\r\n    </button>\r\n    \r\n    <div *ngIf=\"message\" class=\"alert alert-success\">\r\n      {{ message }}\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf=\"!currentProduct && !error\">\r\n  <br />\r\n  <p>Select a product to view details...</p>\r\n</div> ","import { Component, Input, OnInit } from '@angular/core';\r\nimport { ProductService } from 'src/app/services/product.service';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Product } from 'src/app/models/product.model';\r\n\r\n@Component({\r\n  selector: 'app-product-details',\r\n  templateUrl: './product-details.component.html',\r\n  styleUrls: ['./product-details.component.css']\r\n})\r\nexport class ProductDetailsComponent implements OnInit {\r\n  @Input() viewMode = false;\r\n  @Input() currentProduct: Product | null = {\r\n    title: '',\r\n    price: 0,\r\n    published: false\r\n  };\r\n  \r\n  message = '';\r\n  error = '';\r\n\r\n  constructor(\r\n    private productService: ProductService,\r\n    private route: ActivatedRoute,\r\n    private router: Router) { }\r\n\r\n  ngOnInit(): void {\r\n    if (!this.viewMode) {\r\n      this.message = '';\r\n      this.error = '';\r\n      this.getProduct(this.route.snapshot.params[\"id\"]);\r\n    }\r\n  }\r\n\r\n  getProduct(id: string): void {\r\n    this.productService.get(id)\r\n      .subscribe({\r\n        next: (data) => {\r\n          this.currentProduct = data;\r\n          console.log(data);\r\n        },\r\n        error: (e) => {\r\n          console.error(e);\r\n          this.error = e.error?.message || 'Error accessing the product';\r\n          this.currentProduct = null;\r\n        }\r\n      });\r\n  }\r\n\r\n  updatePublished(status: boolean): void {\r\n    if (!this.currentProduct) return;\r\n\r\n    const data = {\r\n      title: this.currentProduct.title,\r\n      price: this.currentProduct.price,\r\n      published: status\r\n    };\r\n\r\n    this.productService.update(this.currentProduct.id, data)\r\n      .subscribe({\r\n        next: (res) => {\r\n          console.log(res);\r\n          if (this.currentProduct) {\r\n            this.currentProduct.published = status;\r\n          }\r\n          this.message = res.message || 'The status was updated successfully!';\r\n        },\r\n        error: (e) => {\r\n          console.error(e);\r\n          this.error = e.error?.message || 'Error updating the product status';\r\n        }\r\n      });\r\n  }\r\n\r\n  updateProduct(): void {\r\n    if (!this.currentProduct) return;\r\n    \r\n    this.message = '';\r\n    this.error = '';\r\n\r\n    this.productService.update(this.currentProduct.id, this.currentProduct)\r\n      .subscribe({\r\n        next: (res) => {\r\n          console.log(res);\r\n          this.message = res.message || 'This product was updated successfully!';\r\n        },\r\n        error: (e) => {\r\n          console.error(e);\r\n          this.error = e.error?.message || 'Error updating the product';\r\n        }\r\n      });\r\n  }\r\n\r\n  deleteProduct(): void {\r\n    if (!this.currentProduct) return;\r\n\r\n    this.productService.delete(this.currentProduct.id)\r\n      .subscribe({\r\n        next: (res) => {\r\n          console.log(res);\r\n          this.router.navigate(['/products']);\r\n        },\r\n        error: (e) => {\r\n          console.error(e);\r\n          this.error = e.error?.message || 'Error deleting the product';\r\n        }\r\n      });\r\n  }\r\n} "]},"metadata":{},"sourceType":"module","externalDependencies":[]}